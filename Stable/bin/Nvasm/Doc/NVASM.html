<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./NVASM_files/filelist.xml">
<link rel=Edit-Time-Data href="./NVASM_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>NVASM - Vertex and Pixel Shader Macro Assembler</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Kenneth Hurley</o:Author>
  <o:LastAuthor>Kenneth Hurley</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>337</o:TotalTime>
  <o:LastPrinted>2000-10-11T23:41:00Z</o:LastPrinted>
  <o:Created>2001-06-04T23:20:00Z</o:Created>
  <o:LastSaved>2001-06-04T23:20:00Z</o:LastSaved>
  <o:Pages>3</o:Pages>
  <o:Words>933</o:Words>
  <o:Characters>5321</o:Characters>
  <o:Company>Nvidia</o:Company>
  <o:Lines>44</o:Lines>
  <o:Paragraphs>10</o:Paragraphs>
  <o:CharactersWithSpaces>6534</o:CharactersWithSpaces>
  <o:Version>9.3821</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>
  <w:UseMarginsForDrawingGridOrigin/>
  <w:Compatibility>
   <w:FootnoteLayoutLikeWW8/>
   <w:ShapeLayoutLikeWW8/>
   <w:AlignTablesRowByRow/>
   <w:ForgetLastTabAlignment/>
   <w:LayoutRawTableWidth/>
   <w:LayoutTableRowsApart/>
  </w:Compatibility>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
span.MsoCommentReference
	{mso-ansi-font-size:8.0pt;
	mso-bidi-font-size:8.0pt;}
p.Code, li.Code, div.Code
	{mso-style-name:Code;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";}
@page Section1
	{size:8.5in 11.0in;
	margin:.75in 1.0in .75in 1.0in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:215629854;
	mso-list-type:hybrid;
	mso-list-template-ids:-419790806 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.25in;
	mso-level-number-position:left;
	margin-left:.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l1
	{mso-list-id:396251154;
	mso-list-type:hybrid;
	mso-list-template-ids:885144720 67698699 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l2
	{mso-list-id:492646072;
	mso-list-type:hybrid;
	mso-list-template-ids:-402898492 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l3
	{mso-list-id:577061989;
	mso-list-type:hybrid;
	mso-list-template-ids:710308276 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l3:level1
	{mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;}
@list l4
	{mso-list-id:623275195;
	mso-list-type:hybrid;
	mso-list-template-ids:-79661770 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l5
	{mso-list-id:706030697;
	mso-list-type:hybrid;
	mso-list-template-ids:-510354564 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l6
	{mso-list-id:824130924;
	mso-list-type:hybrid;
	mso-list-template-ids:468480152 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l6:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l7
	{mso-list-id:839664728;
	mso-list-type:hybrid;
	mso-list-template-ids:965397202 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l7:level1
	{mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;}
@list l8
	{mso-list-id:1349334927;
	mso-list-type:hybrid;
	mso-list-template-ids:1429637530 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l8:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l9
	{mso-list-id:1785684909;
	mso-list-type:hybrid;
	mso-list-template-ids:2051966492 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l10
	{mso-list-id:1924491228;
	mso-list-type:hybrid;
	mso-list-template-ids:468480152 67698689 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l10:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l11
	{mso-list-id:2043356711;
	mso-list-type:hybrid;
	mso-list-template-ids:-863349518 67698699 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l11:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0D8;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-bidi-font-family:Arial'>NVASM
- Vertex and Pixel Shader Macro Assembler<o:p></o:p></span></b></p>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'>Overview<o:p></o:p></span></b></p>

<p class=MsoNormal style='text-align:justify'><b><span style='mso-bidi-font-family:
Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></b></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'>NVASM was developed
for a variety of reasons. Allowing developers to assemble their Vertex and
Pixel Shader source code into object code that can be loaded directly into
DX8.<span style="mso-spacerun: yes">  </span>Better error reporting
functionality was included so that you can double click on the error and be
taken directly to the line of the error, inside of Microsoft</span><span
style='font-family:Symbol;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;mso-char-type:symbol;mso-symbol-font-family:
Symbol'><span style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
style='mso-bidi-font-family:Arial'> Visual Studio</span><span style='font-family:
Symbol;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;mso-char-type:symbol;mso-symbol-font-family:Symbol'><span
style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
style='mso-bidi-font-family:Arial'>.<span style="mso-spacerun: yes"> 
</span>Listing file support is included so that you can look at the output
generated by the assembler.<span style="mso-spacerun: yes">  </span>Finally it
was written so that it is easily extensible, so that when new assembly opcodes
are defined, they can be integrated.<o:p></o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='mso-bidi-font-family:
Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'>Features<o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></b></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo7;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>Command line program for easy
     integration into Microsoft</span><span style='font-family:Symbol;
     mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
     Arial;mso-char-type:symbol;mso-symbol-font-family:Symbol'><span
     style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
     style='mso-bidi-font-family:Arial'> Visual Studio</span><span
     style='font-family:Symbol;mso-ascii-font-family:Arial;mso-hansi-font-family:
     Arial;mso-bidi-font-family:Arial;mso-char-type:symbol;mso-symbol-font-family:
     Symbol'><span style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
     style='mso-bidi-font-family:Arial'><o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo7;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>Built-in #define capability<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo7;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>Macro functions<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo7;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>Integrated Vertex and Pixel Shader
     assembler<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo7;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>Robust error reporting<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo7;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>Listing file support<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo7;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>Output to .h files or object code<o:p></o:p></span></li>
</ul>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'>How to use NVASM<o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></b></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'>NVASM can either be
used from the command line or integrated inside of Microsoft</span><span
style='font-family:Symbol;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;mso-char-type:symbol;mso-symbol-font-family:
Symbol'><span style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
style='mso-bidi-font-family:Arial'> Visual Studio</span><span style='font-family:
Symbol;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;mso-char-type:symbol;mso-symbol-font-family:Symbol'><span
style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
style='mso-bidi-font-family:Arial'>.<span style="mso-spacerun: yes"> 
</span>Integration inside Visual Studio</span><span style='font-family:Symbol;
mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;mso-char-type:symbol;mso-symbol-font-family:Symbol'><span
style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
style='mso-bidi-font-family:Arial'> will be explained later in this
document.<span style="mso-spacerun: yes">  </span>You can invoke NVASM from the
command line.<span style="mso-spacerun: yes">  </span>Here is an example of how
to do that.<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='mso-tab-count:1'>      </span>nvasm -lxh test.psa
testpsa.h testpsa.lst</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>NVASM takes options first followed by the source file, then
the output file and finally followed by the listing filename.<span
style="mso-spacerun: yes">  </span>The output and listing filenames are
optional and will be auto generated from the source file name if they are not
specified.<span style="mso-spacerun: yes">  </span>Output take the base
filename of the source file and append either .vso , .pso or .h for a vertex
shader object file, pixel shader object file or output of a .h file,
respectively.<span style="mso-spacerun: yes">  </span>The listing file is auto
generated from the base filename of the source file with .lst appended.<span
style="mso-spacerun: yes">  </span>This only is done if the -l option is
specified.</p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'>NVASM Options<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l8 level1 lfo12;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>-b Suppresses banner when the nvasm.exe
     program is called.<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo12;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>-d Generates debug info inside of the
     object code (not functional for version 1.0)<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo12;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>-h Generates a .h file instead of the
     default .pso or .vso file<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo12;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>-l Generates a listing file that can be
     viewed<o:p></o:p></span></li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo12;tab-stops:list .5in'><span
     style='mso-bidi-font-family:Arial'>-x Expands macros inside the listing
     file<o:p></o:p></span></li>
</ul>

<p class=MsoNormal style='margin-left:.25in'><span style='mso-bidi-font-family:
Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'>NVASM Error
Reporting<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'>NVASM has robust
error reporting built in to it.<span style="mso-spacerun: yes">  </span>It will
not only tell you what line the error was on, so that Visual Studio</span><span
style='font-family:Symbol;mso-ascii-font-family:Arial;mso-hansi-font-family:
Arial;mso-bidi-font-family:Arial;mso-char-type:symbol;mso-symbol-font-family:
Symbol'><span style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
style='mso-bidi-font-family:Arial'> can understand it, it will tell you where
the source line is even back tracking though macros.<span style="mso-spacerun:
yes">  </span>This is a very powerful feature, because now you can just double
click on the error and be taken directly to the macro that generated it and you
still know the line where the macro was invoked.<span style="mso-spacerun:
yes">  </span>Here is an example of the error output from NVASM:<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code>.\test.vsa(41) : error Can't use vertex register as destination
argument.</p>

<p class=Code>.\test.vsa(44) : References -&gt;</p>

<p class=Code>constants.h(6) : error Can't use swizzle modifier on the address
register.</p>

<p class=Code>----- Assembly unsuccessful, 68 line assembled, 10 errors, 3
warnings -----</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code><span style='font-family:Arial'>As you can see from the above
example, Line 44 in test.vsa has an error.<span style="mso-spacerun: yes"> 
</span>Sine Line 44 was a macro, the next line tells you that it came from
constants.h at line(6).<span style="mso-spacerun: yes">  </span>If you double
click on this line, you will taken directly to the macro line that generated
the error.<o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><b><span style='font-family:Arial'>Macros<o:p></o:p></span></b></p>

<p class=Code><span style='font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'>NVASM has several ways to use
macros.<span style="mso-spacerun: yes">  </span>You can use the #define type of
macros that are used in C/C++ or you can use the &quot;macro/endm&quot;
keywords.<span style="mso-spacerun: yes">  </span>#define macros do not have
all the capabilities of the &quot;macro/endm&quot; type of macros.<o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'>Here is an example of how to use
the &quot;macro/endm&quot; keywords:<o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code>macro<span style='mso-tab-count:1'> </span>Test<span
style='mso-tab-count:1'>  </span>x,y</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code><span style='mso-tab-count:1'>      </span>dp3<span
style='mso-tab-count:1'>   </span>r0, %x.x, %y</p>

<p class=Code><span style='mso-tab-count:1'>      </span>dp3<span
style='mso-tab-count:1'>   </span>r0, %x.y, %inc(%y)</p>

<p class=Code>endm</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>The &quot;macro&quot; line has the word &quot;Test&quot; on
it and this is the name of the macro.<span style="mso-spacerun: yes"> 
</span>The next two items on the line are the parameters for the macro, if
there are any.<span style="mso-spacerun: yes">  </span>The macro body is
defined until the assembler reaches the &quot;endm&quot; keyword.<span
style="mso-spacerun: yes">  </span>When the macro is invoked the assembler
looks for the % sign to replace the parameters you specified inside of the macro
body.<span style="mso-spacerun: yes">  </span>There are four special % macro
functions that are available, the %inc(), %dec(), %add() and %sub() macro
functions.<span style="mso-spacerun: yes">  </span>These take the string
between the parentheses and do one of two things.<span style="mso-spacerun:
yes">  </span>If the text between the parentheses has an explicit number in it,
it will replace that number with another number that is either +1 or -1 for
%inc and %dec, respectively. If there isn't an explicit number in the text
between the parenthesis, then the functions look for the inner most brackets/
parenthesis or scans to the end of the line and inserts the text &quot;+1&quot;
or&quot;-1&quot; for %inc and %dec, respectively.<span style="mso-spacerun:
yes">  </span>The macros %add and %sub take one other argument that is the
amount to offset the text.<span style="mso-spacerun: yes">  </span>So for
example %add(%y, 5) would add 5 to the text.<span style="mso-spacerun: yes"> 
</span>The %add and %sub work in the exact same way as the %inc, %dec macros in
terms of text replacement.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'>Now to invoke the
macro in the source you would do the following<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='mso-tab-count:1'>      </span>Text<span
style='mso-tab-count:1'>  </span>r1, c[EYE_NORMAL]</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>This would expand to the following inside the macro:</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code><span style='mso-tab-count:1'>      </span>dp3<span
style='mso-tab-count:1'>   </span>r0, r1.x, c[EYE_NORMAL]</p>

<p class=Code><span style='mso-tab-count:1'>      </span>dp3<span
style='mso-tab-count:1'>   </span>r0, r1.y, c[EYE_NORMAL+1]</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>If you invoked the macro with the following parameters:</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code><span style='mso-tab-count:1'>      </span>Text<span
style='mso-tab-count:1'>  </span>r1, r5</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>This would expand to the following inside the macro</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=Code><span style='mso-tab-count:1'>      </span>dp3<span
style='mso-tab-count:1'>   </span>r0, r1.x, r5</p>

<p class=Code><span style='mso-tab-count:1'>      </span>dp3<span
style='mso-tab-count:1'>   </span>r0, r1.y, r6</p>

<p class=Code><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'>Integration into
Microsoft</span></b><b><span style='font-family:Symbol;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;mso-char-type:
symbol;mso-symbol-font-family:Symbol'><span style='mso-char-type:symbol;
mso-symbol-font-family:Symbol'>â</span></span></b><b><span style='mso-bidi-font-family:
Arial'> Visual Studio</span></b><b><span style='font-family:Symbol;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;mso-char-type:
symbol;mso-symbol-font-family:Symbol'><span style='mso-char-type:symbol;
mso-symbol-font-family:Symbol'>â</span></span></b><b><span style='mso-bidi-font-family:
Arial'><o:p></o:p></span></b></p>

<p class=MsoNormal><b><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></b></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'>The assembler can
be integrated into your existing Visual Studio</span><span style='font-family:
Symbol;mso-ascii-font-family:Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:
Arial;mso-char-type:symbol;mso-symbol-font-family:Symbol'><span
style='mso-char-type:symbol;mso-symbol-font-family:Symbol'>â</span></span><span
style='mso-bidi-font-family:Arial'> Project.<span style="mso-spacerun: yes"> 
</span>To include Vertex Assembly or Pixel Shader Assembly files into your
project, follow these steps:<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l7 level1 lfo8;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Arial'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='mso-bidi-font-family:Arial'>Add files to
the project with the Project-&gt;Add To Project-&gt;Files… menu options<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l7 level1 lfo8;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Arial'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='mso-bidi-font-family:Arial'>Setup the
Custom Build settings by selecting Project-&gt;Settings… menu options and then
selecting the assembly files. <o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l7 level1 lfo8;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Arial'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='mso-bidi-font-family:Arial'>Click on the
Custom Build tab<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=MsoNormal><!--[if gte vml 1]><v:shapetype id="_x0000_t75" coordsize="21600,21600"
 o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f"
 stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:432.75pt;
 height:279pt;mso-position-vertical-relative:page' o:allowoverlap="f">
 <v:imagedata src="./NVASM_files/image001.png" o:title="NVASM-vcsetup"/>
</v:shape><![endif]--><![if !vml]><img width=577 height=372
src="./NVASM_files/image002.jpg" v:shapes="_x0000_i1025"><![endif]></p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l7 level1 lfo8;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Arial'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='mso-bidi-font-family:Arial'>Set the
Description box to anything you like<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l7 level1 lfo8;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Arial'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='mso-bidi-font-family:Arial'>Put the NVASM
command line in the Commands box.<span style="mso-spacerun: yes">  </span>You
should specify any options you would like on this line also.<span
style="mso-spacerun: yes">  </span>The above example uses the listing, expand
macros and generate .h file options that will be explained later<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l7 level1 lfo8;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Arial'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='mso-bidi-font-family:Arial'>Set the
Outputs box to be the name of the output file you would like generated.<span
style="mso-spacerun: yes">  </span>The above example says the output file will
be named testvsa.h.<span style="mso-spacerun: yes">  </span>The $(TargetPath)
in the Command box will use this name when calling the NVASM program.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l7 level1 lfo8;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Arial'>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='mso-bidi-font-family:Arial'>Set any
Dependencies by clicking on the Dependencies… button.<span style="mso-spacerun:
yes">  </span>You should put any .h files that are included in the assembly
language file in this dialog box. This will ensure that if you update the .h
file, Visual Studio</span><span style='font-family:Symbol;mso-ascii-font-family:
Arial;mso-hansi-font-family:Arial;mso-bidi-font-family:Arial;mso-char-type:
symbol;mso-symbol-font-family:Symbol'><span style='mso-char-type:symbol;
mso-symbol-font-family:Symbol'>â</span></span><span style='mso-bidi-font-family:
Arial'> will re-assemble the assembler file.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in;mso-list:l7 level1 lfo8;
tab-stops:list .75in'><![if !supportLists]><span style='mso-bidi-font-family:
Arial'>8.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]><span style='mso-bidi-font-family:Arial'>Click OK.<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><b><span style='font-family:Arial'>Contact</span></b><span
style='font-family:Arial'><o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'>If you have any questions or
comments regarding NVASM, contact:<o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'>Kenneth Hurley<o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'>NVIDIA Corporation<o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'>2701 San Thomas Expressway<o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'>Santa Clara, CA. 95050<o:p></o:p></span></p>

<p class=Code><span style='font-family:Arial'>khurley@nvidia.com<o:p></o:p></span></p>

</div>

</body>

</html>
